<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Phong Bì Valentine</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(
          135deg,
          #ffeef8 0%,
          #ffe5f1 50%,
          #ffd9ec 100%
        );
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
        overflow: hidden;
      }

      .container {
        text-align: center;
        max-width: 800px;
        width: 100%;
        position: relative;
      }

      .instruction {
        color: #ff1493;
        font-size: 28px;
        font-weight: bold;
        margin-bottom: 20px;
        text-shadow: 2px 2px 8px rgba(255, 105, 180, 0.3);
        animation: floatText 3s ease-in-out infinite;
        height: 40px;
      }

      @keyframes floatText {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      /* --- PHONG BÌ PHONG CÁCH GỐC --- */
      .envelope-wrapper {
        position: relative;
        width: 550px;
        height: 350px;
        margin: 50px auto;
        perspective: 1500px;
      }

      .envelope-container {
        position: relative;
        width: 100%;
        height: 100%;
        transform-style: preserve-3d;
        cursor: pointer;
      }

      /* Lớp nền phong bì */
      .envelope-base {
        position: absolute;
        width: 100%;
        height: 100%;
        background: #ff99cc;
        border-radius: 10px;
        box-shadow: 0 15px 35px rgba(255, 105, 180, 0.3);
        z-index: 1;
      }

      /* Nắp phong bì (Có đổ bóng như bản gốc) */
      .envelope-top-flap {
        position: absolute;
        top: 0;
        left: 0;
        width: 0;
        height: 0;
        border-style: solid;
        border-width: 175px 275px 0 275px;
        border-color: #ffcce0 transparent transparent transparent;
        transform-origin: top;
        transition:
          transform 0.6s ease-in-out,
          z-index 0.2s;
        z-index: 4;
        filter: drop-shadow(0 2px 5px rgba(0, 0, 0, 0.1));
      }

      .opened .envelope-top-flap {
        transform: rotateX(180deg);
        z-index: 0;
      }

      /* Mặt trước (Phần túi đựng thư) */
      .envelope-front {
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: 3;
        pointer-events: none;
      }

      /* Các miếng ghép tạo hình phong bì bản gốc */
      .envelope-front::before {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        border-style: solid;
        border-width: 0 0 175px 550px;
        border-color: transparent transparent #ffb3d9 transparent;
      }

      .envelope-front::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        border-style: solid;
        border-width: 175px 275px 175px 275px;
        border-color: transparent #ffcce0 #ffcce0 #ffcce0;
        border-radius: 0 0 10px 10px;
      }

      /* Con dấu trái tim */
      .heart-seal {
        position: absolute;
        top: 175px;
        left: 50%;
        transform: translate(-50%, -50%) scale(1);
        width: 60px;
        height: 60px;
        background: #ff1493;
        border-radius: 50%;
        z-index: 5;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 30px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        transition:
          opacity 0.3s ease,
          transform 0.3s ease;
      }

      .opened .heart-seal,
      .is-animating .heart-seal {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0);
      }

      /* --- TỜ GIẤY --- */
      .letter {
        position: absolute;
        width: 90%;
        height: 90%;
        background: #fffef9;
        left: 5%;
        top: 25px; /* Giấu sâu để lần đầu không bị lòi */
        padding: 30px;
        border-radius: 5px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        z-index: 2;
        transition:
          transform 0.8s cubic-bezier(0.4, 0, 0.2, 1),
          z-index 0.1s;
      }

      .letter.up {
        transform: translateY(-210px);
        z-index: 10;
      }

      .letter-content {
        opacity: 0;
        transition: opacity 0.4s;
      }
      .opened .letter-content {
        opacity: 1;
      }

      .signature {
        margin-top: 15px;
        text-align: right;
        font-weight: bold;
        color: #ff1493;
      }

      /* Phụ kiện */
      .gif-container {
        position: absolute;
        right: -220px;
        top: 50%;
        transform: translateY(-50%);
      }
      .gif-container img {
        width: 180px;
        border-radius: 15px;
      }

      .photo-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 2000;
      }
      .photo-frame {
        position: relative;
        max-width: 400px;
        padding: 10px;
        background: white;
        border-radius: 5px;
      }
      .photo-frame img {
        width: 100%;
      }
      .close-photo {
        position: absolute;
        top: -35px;
        right: -35px;
        color: white;
        font-size: 35px;
        cursor: pointer;
      }

      @media (max-width: 768px) {
        .envelope-wrapper {
          width: 320px;
          height: 210px;
        }
        .envelope-top-flap {
          border-width: 105px 160px 0 160px;
        }
        .heart-seal {
          top: 105px;
          width: 45px;
          height: 45px;
          font-size: 22px;
        }
        .gif-container {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="instruction" id="instruction">
        Em hãy bấm vào phong bì để mở nhé!
      </div>
      <div class="envelope-wrapper">
        <div class="gif-container">
          <img src="uploads/Hello Kitty Pink GIF.gif" alt="Decoration" />
        </div>

        <div class="envelope-container" id="envelopeContainer">
          <div class="envelope-base"></div>

          <div class="letter" id="letter">
            <div class="letter-content">
              <h2 style="color: #ff1493; margin-bottom: 12px; font-size: 22px">
                Valentine Hạnh Phúc!
              </h2>
              <p
                style="
                  color: #1b0714;
                  line-height: 1.5;
                  text-align: left;
                  font-size: 16px;
                "
              >
                Mùa lễ tình nhân đã tới và anh thật may mắn khi có em ở bên
                cạnh. Em biết không, sự xuất hiện của em đã sưởi nắng ấm cho
                anh, cho trái tim anh. Không có một bộ nhớ nào có thể chứa được
                tình cảm của anh dành cho em. Căm ơn em và chúc em có một ngày
                Valentine tuyệt vời!
              </p>
              <div class="signature">Gửi bé yêu của anh❤️</div>
              <div
                style="
                  font-size: 12px;
                  color: #ff69b4;
                  margin-top: 20px;
                  cursor: pointer;
                  text-decoration: underline;
                "
              >
                (Bấm vào đây để xem ảnh nhé)
              </div>
            </div>
          </div>

          <div class="envelope-front"></div>

          <div class="envelope-top-flap"></div>

          <div class="heart-seal">❤️</div>
        </div>
      </div>
    </div>

    <div class="photo-overlay" id="photoOverlay">
      <div class="photo-frame">
        <span class="close-photo" id="closePhoto">&times;</span>
        <img src="our-photo.jpg" alt="Our Photo" />
        <p
          style="
            text-align: center;
            margin-top: 10px;
            color: #ff1493;
            font-weight: bold;
            font-size: 18px;
          "
        >
          ❤️ Chúng mình ❤️
        </p>
      </div>
    </div>

    <script>
      const container = document.getElementById("envelopeContainer");
      const letter = document.getElementById("letter");
      const photoOverlay = document.getElementById("photoOverlay");
      const closePhoto = document.getElementById("closePhoto");
      const instruction = document.getElementById("instruction");

      let currentState = "closed";

      container.addEventListener("click", function () {
        if (currentState === "closed") {
          // Ép z-index để không bị lòi ở lần đầu
          letter.style.zIndex = "2";
          container.classList.add("opened");
          instruction.innerText = "Bấm tiếp để rút thư ra...";
          currentState = "opened";
        } else if (currentState === "opened") {
          letter.classList.add("up");
          instruction.innerText = "Bấm để xem ảnh hoặc cất thư ❤️";
          currentState = "up";
        } else if (currentState === "up") {
          instruction.innerText = "Đang cất thư...";
          currentState = "closing";
          container.classList.add("is-animating");

          letter.classList.remove("up");

          setTimeout(() => {
            letter.style.zIndex = "2";
            container.classList.remove("opened");

            setTimeout(() => {
              container.classList.remove("is-animating");
              instruction.innerText = "Bấm để mở lại nhé!";
              currentState = "closed";
            }, 600);
          }, 800);
        }
      });

      // Mở ảnh khi click vào thư đã rút lên
      letter.addEventListener("click", function (e) {
        if (currentState === "up") {
          e.stopPropagation();
          photoOverlay.style.display = "flex";
        }
      });

      closePhoto.addEventListener("click", () => {
        photoOverlay.style.display = "none";
      });
    </script>
  </body>
</html>
