<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Phong Bì Valentine</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(
          135deg,
          #ffeef8 0%,
          #ffe5f1 50%,
          #ffd9ec 100%
        );
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 10px;
        overflow-x: hidden; /* Ngăn chặn cuộn ngang */
      }

      .container {
        text-align: center;
        max-width: 100%;
        width: 100%;
        position: relative;
      }

      .instruction {
        color: #ff1493;
        font-size: clamp(18px, 5vw, 28px); /* Tự co giãn cỡ chữ */
        font-weight: bold;
        margin-bottom: 20px;
        text-shadow: 2px 2px 8px rgba(255, 105, 180, 0.3);
        animation: floatText 3s ease-in-out infinite;
        height: auto;
      }

      @keyframes floatText {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      /* --- PHONG BÌ RESPONSIVE --- */
      .envelope-wrapper {
        position: relative;
        width: min(
          90vw,
          550px
        ); /* Rộng tối đa 550px, trên mobile chiếm 90% màn hình */
        aspect-ratio: 550 / 350; /* Giữ nguyên tỷ lệ phong bì */
        margin: 20px auto;
        perspective: 1500px;
      }

      .envelope-container {
        position: relative;
        width: 100%;
        height: 100%;
        transform-style: preserve-3d;
        cursor: pointer;
      }

      .envelope-base {
        position: absolute;
        width: 100%;
        height: 100%;
        background: #ff99cc;
        border-radius: 10px;
        box-shadow: 0 10px 25px rgba(255, 105, 180, 0.3);
        z-index: 1;
      }

      /* Nắp phong bì dùng clip-path để không bị hở */
      .envelope-top-flap {
        position: absolute;
        top: -1px;
        left: 0;
        width: 100%;
        height: 50.5%;
        background-color: #ffcce0;
        clip-path: polygon(0 0, 100% 0, 50% 100%);
        transform-origin: top;
        transition:
          transform 0.6s ease-in-out,
          z-index 0.2s;
        z-index: 4;
        filter: drop-shadow(0 2px 3px rgba(0, 0, 0, 0.1));
      }

      .opened .envelope-top-flap {
        transform: rotateX(180deg);
        z-index: 0;
      }

      .envelope-front {
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: 3;
        pointer-events: none;
      }

      /* Miếng ghép mặt trước */
      .envelope-front::before {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: #ffb3d9;
        clip-path: polygon(0 100%, 100% 100%, 100% 50%, 0 50%);
        opacity: 0.8;
      }

      .envelope-front::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: #ffcce0;
        clip-path: polygon(0 100%, 50% 50%, 100% 100%);
        border-radius: 0 0 10px 10px;
      }

      .heart-seal {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(1);
        width: clamp(40px, 10vw, 60px);
        height: clamp(40px, 10vw, 60px);
        background: #ff1493;
        border-radius: 50%;
        z-index: 5;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: clamp(20px, 5vw, 30px);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        transition:
          opacity 0.3s ease,
          transform 0.3s ease;
      }

      .opened .heart-seal {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0);
      }

      /* --- TỜ THƯ TỰ CO GIÃN --- */
      .letter {
        position: absolute;
        width: 90%;
        height: 90%;
        background: #fffef9;
        left: 5%;
        top: 5%;
        padding: min(25px, 4vw);
        border-radius: 5px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        z-index: 2;
        transition:
          transform 0.8s cubic-bezier(0.4, 0, 0.2, 1),
          z-index 0.1s;
        overflow: hidden;
      }

      .letter.up {
        transform: translateY(-55%); /* Kéo lên theo tỷ lệ */
        z-index: 10;
      }

      .letter-content {
        opacity: 0;
        transition: opacity 0.4s;
        display: flex;
        flex-direction: column;
        height: 100%;
      }
      .opened .letter-content {
        opacity: 1;
      }

      .letter-content h2 {
        font-size: clamp(16px, 4vw, 22px);
        color: #ff1493;
        margin-bottom: 8px;
      }
      .letter-content p {
        font-size: clamp(13px, 3.5vw, 16px);
        line-height: 1.4;
        text-align: left;
        color: #1b0714;
      }

      .signature {
        margin-top: auto;
        text-align: right;
        font-weight: bold;
        color: #ff1493;
        font-size: clamp(12px, 3vw, 16px);
      }

      /* GIF TRANG TRÍ - Ẩn trên màn hình quá nhỏ để đỡ rối */
      .gif-container {
        position: absolute;
        right: -120px;
        top: 80%;
        transform: translateY(-50%);
        z-index: 20;
      }
      .gif-container img {
        width: 100px;
      }

      /* PHOTO OVERLAY */
      .photo-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 3000;
        padding: 20px;
      }
      .photo-frame {
        position: relative;
        max-width: 90%;
        max-height: 80vh;
        background: white;
        padding: 10px;
        border-radius: 5px;
      }
      .photo-frame img {
        width: 100%;
        max-height: 70vh;
        object-fit: contain;
      }
      .close-photo {
        position: absolute;
        top: -40px;
        right: 0;
        color: white;
        font-size: 40px;
        cursor: pointer;
      }

      @media (max-width: 900px) {
        .gif-container {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="instruction" id="instruction">
        Em hãy bấm vào phong bì để mở nhé!
      </div>

      <div class="envelope-wrapper">
        <div class="gif-container">
          <img src="uploads/Hello Kitty Pink GIF.gif" alt="Decoration" />
        </div>

        <div class="envelope-container" id="envelopeContainer">
          <div class="envelope-base"></div>

          <div class="letter" id="letter">
            <div class="letter-content">
              <h2>Valentine Hạnh Phúc!</h2>
              <p>
                Mùa lễ tình nhân đã tới và anh thật may mắn khi có em ở bên
                cạnh. Em biết không, sự xuất hiện của em đã sưởi nắng ấm cho
                anh, cho trái tim anh. Không có một bộ nhớ nào có thể chứa được
                tình cảm của anh dành cho em. Cảm ơn em và chúc em có một ngày
                Valentine tuyệt vời!
              </p>
              <div class="signature">Gửi bé yêu của anh ❤️</div>
              <div
                style="
                  font-size: 11px;
                  color: #ff69b4;
                  margin-top: 10px;
                  text-decoration: underline;
                "
              >
                (Bấm vào thư để xem ảnh nhé)
              </div>
            </div>
          </div>

          <div class="envelope-front"></div>
          <div class="envelope-top-flap"></div>
          <div class="heart-seal">❤️</div>
        </div>
      </div>
    </div>

    <div class="photo-overlay" id="photoOverlay">
      <div class="photo-frame">
        <span class="close-photo" id="closePhoto">&times;</span>
        <img src="our-photo.jpg" alt="Our Photo" />
        <p
          style="
            text-align: center;
            margin-top: 10px;
            color: #ff1493;
            font-weight: bold;
          "
        >
          ❤️ Chúng mình ❤️
        </p>
      </div>
    </div>

    <script>
      const container = document.getElementById("envelopeContainer");
      const letter = document.getElementById("letter");
      const photoOverlay = document.getElementById("photoOverlay");
      const closePhoto = document.getElementById("closePhoto");
      const instruction = document.getElementById("instruction");

      let currentState = "closed";

      container.addEventListener("click", function () {
        if (currentState === "closed") {
          container.classList.add("opened");
          instruction.innerText = "Bấm tiếp để rút thư ra...";
          currentState = "opened";
        } else if (currentState === "opened") {
          letter.classList.add("up");
          instruction.innerText = "Bấm vào thư để xem ảnh ❤️";
          currentState = "up";
        } else if (currentState === "up") {
          letter.classList.remove("up");
          container.classList.remove("opened");
          instruction.innerText = "Bấm để mở lại nhé!";
          currentState = "closed";
        }
      });

      letter.addEventListener("click", function (e) {
        if (currentState === "up") {
          e.stopPropagation();
          photoOverlay.style.display = "flex";
        }
      });

      closePhoto.addEventListener("click", () => {
        photoOverlay.style.display = "none";
      });
    </script>
  </body>
</html>

